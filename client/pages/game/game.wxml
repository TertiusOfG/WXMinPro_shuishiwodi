
<!--pages/game/game.wxml-->
<view class="container">
  <view class="word-display-area">
    <view class="word-label">你的词语</view>
    <view class="word">{{word}}</view>
  </view>

  <scroll-view class="speeches-area" scroll-y="true">
    <view wx:for="{{speeches}}" wx:key="index" class="speech-bubble">
      <text class="speech-nickname">{{item.nickname}}:</text>
      <text class="speech-message">{{item.message}}</text>
    </view>
  </scroll-view>

  <view class="game-status">
    <text wx:if="{{gameState === 'playing' && currentPlayerId}}">轮到 {{currentPlayerNickname}} 发言</text>
    <text wx:if="{{gameState === 'voting'}}">请投票</text>
  </view>

  <view class="players-grid {{gameState === 'voting' ? 'voting-active' : ''}}">
    <view wx:for="{{players}}" wx:key="id" class="player-card {{item.isEliminated ? 'eliminated' : ''}} {{item.id === selectedPlayerId ? 'selected' : ''}} {{item.id === currentPlayerId ? 'current-turn' : ''}}" bindtap="handleVote" data-target-id="{{item.id}}" style="{{item.style}}">
      <view class="player-nickname">{{item.nickname}}</view>
      <view class="player-status" wx:if="{{item.isEliminated}}">已出局</view>
    </view>
  </view>

  <view class="action-area">
    <!-- Speech Input -->
    <block wx:if="{{gameState === 'playing' && isMyTurn}}">
      <input class="speech-input" placeholder="请输入你的描述" value="{{speechInput}}" bindinput="onSpeechInput" />
      <button class="button" bindtap="submitSpeech">发言</button>
    </block>

    <!-- Voting Button -->
    <block wx:if="{{gameState === 'voting'}}">
      <button class="button" bindtap="submitVote" disabled="{{!selectedPlayerId}}">确认投票</button>
    </block>
  </view>
</view>
